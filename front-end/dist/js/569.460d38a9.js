(self["webpackChunkfront_end"]=self["webpackChunkfront_end"]||[]).push([[569],{5380:function(e){e.exports={formatTargetDate(e){let a=new Date(e);return{YY:"".concat("0000",a.getFullYear()).slice(-4),MM:"".concat("0000",a.getMonth()+1).slice(-2),DD:"".concat("0000",a.getDate()).slice(-2),HH:"".concat("0000",a.getHours()).slice(-2),mm:"".concat("0000",a.getMinutes()).slice(-2),ss:"".concat("0000",a.getSeconds()).slice(-2),SSS:"".concat("0000",a.getMilliseconds()).slice(-3)}},formatCurrentDate(){let e=new Date;return{YY:"".concat("0000",e.getFullYear()).slice(-4),MM:"".concat("0000",e.getMonth()+1).slice(-2),DD:"".concat("0000",e.getDate()).slice(-2),HH:"".concat("0000",e.getHours()).slice(-2),mm:"".concat("0000",e.getMinutes()).slice(-2),ss:"".concat("0000",e.getSeconds()).slice(-2),SSS:"".concat("0000",e.getMilliseconds()).slice(-3)}}}},2569:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return H}});var t=l(3396),o=l(7139);const r=e=>((0,t.dD)("data-v-44ba82f2"),e=e(),(0,t.Cn)(),e),n={class:"user-manage-wrap"},d={class:"head-box"},u=r((()=>(0,t._)("p",{class:"label-text"},"用户组",-1))),i=r((()=>(0,t._)("p",{class:"label-text"},"用户状态",-1))),s=(0,t.Uk)("搜索"),m=(0,t.Uk)("重置搜索条件"),c=(0,t.Uk)("新增用户"),w={class:"table-box"},b={key:0,class:"success"},g={key:1,class:"warning"},p={key:2,class:"danger"},h={key:0},D=(0,t.Uk)("编辑用户"),f=(0,t.Uk)("恢复用户"),k=(0,t.Uk)("禁用用户"),_=(0,t.Uk)("删除用户"),V={key:1},W={class:"dialog-footer"},v=(0,t.Uk)("取消"),y=(0,t.Uk)("新增"),U=(0,t.Uk)("修改");function R(e,a,l,r,R,z){const C=(0,t.up)("el-input"),x=(0,t.up)("el-option"),B=(0,t.up)("el-select"),M=(0,t.up)("el-button"),S=(0,t.up)("el-table-column"),F=(0,t.up)("el-table"),H=(0,t.up)("el-form-item"),Y=(0,t.up)("el-form"),j=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)("section",n,[(0,t._)("section",d,[(0,t.Wm)(C,{modelValue:R.headForm.name,"onUpdate:modelValue":a[0]||(a[0]=e=>R.headForm.name=e),placeholder:"账号/昵称/邮箱/手机号/姓名",clearable:""},null,8,["modelValue"]),u,(0,t.Wm)(B,{modelValue:R.headForm.userGroup,"onUpdate:modelValue":a[1]||(a[1]=e=>R.headForm.userGroup=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(R.userGroup,(e=>((0,t.wg)(),(0,t.j4)(x,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),i,(0,t.Wm)(B,{modelValue:R.headForm.userStatus,"onUpdate:modelValue":a[2]||(a[2]=e=>R.headForm.userStatus=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(R.userStatus,(e=>((0,t.wg)(),(0,t.j4)(x,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,t.Wm)(M,{type:"primary",onClick:z.headSearchButton},{default:(0,t.w5)((()=>[s])),_:1},8,["onClick"]),(0,t.Wm)(M,{type:"warning",onClick:z.headResetButton},{default:(0,t.w5)((()=>[m])),_:1},8,["onClick"]),(0,t.Wm)(M,{type:"success",onClick:z.headAddButton},{default:(0,t.w5)((()=>[c])),_:1},8,["onClick"])]),(0,t._)("section",w,[(0,t.Wm)(F,{size:"default",data:R.tableData,border:"",style:{width:"100%"},"empty-text":"没有数据"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{"header-align":"center",align:"center",label:"#",width:"60"},{default:(0,t.w5)((e=>[(0,t.Uk)((0,o.zw)(e.$index+1),1)])),_:1}),(0,t.Wm)(S,{"header-align":"center",align:"center",prop:"level",label:"用户组",width:"100"},{default:(0,t.w5)((e=>[(0,t.Uk)((0,o.zw)(z.userLevel(e.row)),1)])),_:1}),(0,t.Wm)(S,{"header-align":"center",align:"left",prop:"username",label:"账号",width:"180"}),(0,t.Wm)(S,{"header-align":"center",align:"left",prop:"nickname",label:"昵称",width:"180"}),(0,t.Wm)(S,{"header-align":"center",align:"right",prop:"email",label:"邮箱",width:"280"}),(0,t.Wm)(S,{"header-align":"center",align:"center",prop:"mobile",label:"手机号码",width:"120"}),(0,t.Wm)(S,{"header-align":"center",align:"left",prop:"fullname",label:"姓名",width:"180"}),(0,t.Wm)(S,{"header-align":"center",align:"center",prop:"gender",label:"性别",width:"60"},{default:(0,t.w5)((e=>[(0,t.Uk)((0,o.zw)(z.userGender(e.row)),1)])),_:1}),(0,t.Wm)(S,{"header-align":"center",align:"left",prop:"status",label:"状态",width:"60"},{default:(0,t.w5)((e=>[1===e.row.status?((0,t.wg)(),(0,t.iD)("span",b,"正常")):(0,t.kq)("",!0),2===e.row.status?((0,t.wg)(),(0,t.iD)("span",g,"禁用")):(0,t.kq)("",!0),3===e.row.status?((0,t.wg)(),(0,t.iD)("span",p,"删除")):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(S,{"header-align":"center",align:"center",prop:"edit_time",label:"上次修改时间",width:"170"},{default:(0,t.w5)((e=>[(0,t.Uk)((0,o.zw)(z.formatDate(e.row.edit_time)),1)])),_:1}),(0,t.Wm)(S,{"header-align":"center",align:"center",prop:"create_time",label:"账户创建时间",width:"170"},{default:(0,t.w5)((e=>[(0,t.Uk)((0,o.zw)(z.formatDate(e.row.create_time)),1)])),_:1}),(0,t.Wm)(S,{"header-align":"center",align:"center",label:"操作"},{default:(0,t.w5)((e=>[1!==e.row.user_id?((0,t.wg)(),(0,t.iD)("section",h,[(0,t.Wm)(M,{type:"primary",onClick:a=>z.rowEditButton(e)},{default:(0,t.w5)((()=>[D])),_:2},1032,["onClick"]),1!==e.row.status?((0,t.wg)(),(0,t.j4)(M,{key:0,type:"success",onClick:a=>z.rowResumeButton(e.row)},{default:(0,t.w5)((()=>[f])),_:2},1032,["onClick"])):(0,t.kq)("",!0),1===e.row.status?((0,t.wg)(),(0,t.j4)(M,{key:1,type:"warning",onClick:a=>z.rowDisableButton(e.row)},{default:(0,t.w5)((()=>[k])),_:2},1032,["onClick"])):(0,t.kq)("",!0),1===e.row.status?((0,t.wg)(),(0,t.j4)(M,{key:2,type:"danger",onClick:a=>z.rowDeleteButton(e.row)},{default:(0,t.w5)((()=>[_])),_:2},1032,["onClick"])):(0,t.kq)("",!0)])):((0,t.wg)(),(0,t.iD)("section",V,"超级管理员账户不能被操作"))])),_:1})])),_:1},8,["data"])]),(0,t.Wm)(j,{modelValue:R.editDialogVisible,"onUpdate:modelValue":a[12]||(a[12]=e=>R.editDialogVisible=e),"close-on-click-modal":!1,"destroy-on-close":!0,"custom-class":"edit-dialog"},{footer:(0,t.w5)((()=>[(0,t._)("span",W,[(0,t.Wm)(M,{onClick:a[11]||(a[11]=e=>R.editDialogVisible=!1)},{default:(0,t.w5)((()=>[v])),_:1}),"add"===R.dialogMode?((0,t.wg)(),(0,t.j4)(M,{key:0,type:"primary",onClick:z.addDialogButton},{default:(0,t.w5)((()=>[y])),_:1},8,["onClick"])):((0,t.wg)(),(0,t.j4)(M,{key:1,type:"primary",onClick:z.editDialogButton},{default:(0,t.w5)((()=>[U])),_:1},8,["onClick"]))])])),default:(0,t.w5)((()=>[(0,t.Wm)(Y,{"label-width":"80px",model:R.tableRowData},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{label:"用户组:"},{default:(0,t.w5)((()=>[(0,t.Wm)(B,{modelValue:R.tableRowData.level,"onUpdate:modelValue":a[3]||(a[3]=e=>R.tableRowData.level=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{label:"管理员",value:10}),(0,t.Wm)(x,{label:"普通用户",value:1e3})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(H,{label:"账号:"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{modelValue:R.tableRowData.username,"onUpdate:modelValue":a[4]||(a[4]=e=>R.tableRowData.username=e),placeholder:"请输入账号",maxlength:"20"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(H,{label:"密码:"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{modelValue:R.tableRowData.password,"onUpdate:modelValue":a[5]||(a[5]=e=>R.tableRowData.password=e),type:"password",placeholder:"请输入登录密码",maxlength:"20"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(H,{label:"昵称:"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{modelValue:R.tableRowData.nickname,"onUpdate:modelValue":a[6]||(a[6]=e=>R.tableRowData.nickname=e),placeholder:"请输入昵称，最多可以输入20个字符",maxlength:"20"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(H,{label:"email:"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{modelValue:R.tableRowData.email,"onUpdate:modelValue":a[7]||(a[7]=e=>R.tableRowData.email=e),placeholder:"请输入邮箱，例：example@xxx.xx",maxlength:"50"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(H,{label:"手机号:"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{modelValue:R.tableRowData.mobile,"onUpdate:modelValue":a[8]||(a[8]=e=>R.tableRowData.mobile=e),placeholder:"请输入手机号，例：13812345678",maxlength:"11"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(H,{label:"姓名:"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{modelValue:R.tableRowData.fullname,"onUpdate:modelValue":a[9]||(a[9]=e=>R.tableRowData.fullname=e),placeholder:"请输入姓名",maxlength:"20"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(H,{label:"性别:"},{default:(0,t.w5)((()=>[(0,t.Wm)(B,{modelValue:R.tableRowData.gender,"onUpdate:modelValue":a[10]||(a[10]=e=>R.tableRowData.gender=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{label:"女",value:0}),(0,t.Wm)(x,{label:"男",value:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}var z=l(65),C=l(5574),x=l(5380),B=l(9713),M={name:"user-manage",components:{},props:{},data(){return{headForm:{name:"",userGroup:0,userStatus:0},tableData:[],tableRowData:{},dialogMode:"",editDialogVisible:!1,userGroup:[{label:"全部",value:0},{label:"管理员",value:10},{label:"普通用户",value:1e3}],userStatus:[{label:"全部",value:0},{label:"正常",value:1},{label:"禁用",value:2},{label:"删除",value:3}]}},watch:{},computed:{...(0,z.Se)(["isLogin","userInfo"])},beforeCreate(){},created(){this.getTableData()},beforeMount(){},mounted(){},beforeUpdate(){},updated(){},beforeUnmount(){},unmounted(){},methods:{getTableData(){const e=this;(0,B.Lh)(e.headForm).then((a=>{const{code:l,data:t,message:o}=a.data;200===l?e.tableData=t:C.z8.error(o)}))},editUserPost(e){const a=this;(0,B.uz)(e).then((e=>{const{code:l,message:t}=e.data;200===l?(C.z8.success(t),a.editDialogVisible=!1,a.getTableData()):C.z8.error(t)}))},userLevel(e){let a="游客";return a=1===e.level?"超级管理员":e.level<1e3?"管理员":e.level<1e4?"普通用户":"游客",a},userGender(e){return 1===e.gender?"男":"女"},formatDate(e){let a=(0,x.formatTargetDate)(e);return`${a.YY}-${a.MM}-${a.DD} ${a.HH}:${a.mm}:${a.ss}`},headSearchButton(){this.getTableData()},headResetButton(){this.headForm={name:"",userGroup:0,userStatus:0}},headAddButton(){this.tableRowData={level:1e3,username:"",nickname:"",email:"",mobile:"",fullname:"",gender:1},this.dialogMode="add",this.editDialogVisible=!0},rowEditButton(e){this.tableRowData={index:e.$index,...e.row},this.dialogMode="edit",this.editDialogVisible=!0},rowResumeButton(e){this.editUserPost({op_type:1,user_id:e.user_id})},rowDisableButton(e){this.editUserPost({op_type:2,user_id:e.user_id})},rowDeleteButton(e){this.editUserPost({op_type:3,user_id:e.user_id})},addDialogButton(){const e=this,{username:a,password:l,nickname:t,email:o,mobile:r,fullname:n,level:d,gender:u}=e.tableRowData;d?a?(l||C.z8.error("密码不能为空"),t?o?r?n?0===Number(u)||1===Number(u)?(0,B.cn)(e.tableRowData).then((a=>{const{code:l,message:t}=a.data;200===l?(C.z8.success(t),e.getTableData(),e.editDialogVisible=!1):C.z8.error(t)})):C.z8.error("请选择用户性别"):C.z8.error("姓名不能为空"):C.z8.error("手机不能为空号码"):C.z8.error("邮箱不能为空"):C.z8.error("昵称不能为空")):C.z8.error("账号不能为空"):C.z8.error("请选择用户组")},editDialogButton(){const e=this,{index:a,user_id:l,username:t,nickname:o,email:r,mobile:n,fullname:d,level:u,gender:i}=e.tableRowData;let s={op_type:0,user_id:l};t?(t!==e.tableData[a].username&&(s.username=t),o?(o!==e.tableData[a].nickname&&(s.nickname=o),r?(r!==e.tableData[a].email&&(s.email=r),n?(n!==e.tableData[a].mobile&&(s.mobile=n),d?(d!==e.tableData[a].fullname&&(s.fullname=d),u!==e.tableData[a].level&&(s.level=u),i!==e.tableData[a].gender&&(s.gender=i),e.tableRowData.password&&(s.password=e.tableRowData.password),Object.keys(s).length>2?this.editUserPost(s).then((a=>{const{code:l,message:t}=a.data;200===l?(C.z8.success(t),e.getTableData()):C.z8.error(t)})):C.z8.warning("什么都没有更改！")):C.z8.error("姓名不能为空")):C.z8.error("手机不能为空号码")):C.z8.error("邮箱不能为空")):C.z8.error("昵称不能为空")):C.z8.error("账号不能为空")}}},S=l(89);const F=(0,S.Z)(M,[["render",R],["__scopeId","data-v-44ba82f2"]]);var H=F}}]);
//# sourceMappingURL=569.460d38a9.js.map