(self["webpackChunkfront_end"]=self["webpackChunkfront_end"]||[]).push([[455],{5380:function(e){e.exports={formatTargetDate(e){let t=new Date(e);return{YY:"".concat("0000",t.getFullYear()).slice(-4),MM:"".concat("0000",t.getMonth()+1).slice(-2),DD:"".concat("0000",t.getDate()).slice(-2),HH:"".concat("0000",t.getHours()).slice(-2),mm:"".concat("0000",t.getMinutes()).slice(-2),ss:"".concat("0000",t.getSeconds()).slice(-2),SSS:"".concat("0000",t.getMilliseconds()).slice(-3)}},formatCurrentDate(){let e=new Date;return{YY:"".concat("0000",e.getFullYear()).slice(-4),MM:"".concat("0000",e.getMonth()+1).slice(-2),DD:"".concat("0000",e.getDate()).slice(-2),HH:"".concat("0000",e.getHours()).slice(-2),mm:"".concat("0000",e.getMinutes()).slice(-2),ss:"".concat("0000",e.getSeconds()).slice(-2),SSS:"".concat("0000",e.getMilliseconds()).slice(-3)}}}},7455:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return oe}});var s=a(3396),l=a(7139);const n=e=>((0,s.dD)("data-v-1b90e82c"),e=e(),(0,s.Cn)(),e),i={class:"news-info-wrap"},r={key:0,class:"news-list"},c=["onClick"],o={class:"left-box"},m=["src"],u={key:1,class:"no-thumbnail"},p={class:"right-box"},d={class:"title"},w={class:"info"},k={key:1},_=(0,s.Uk)("返回"),g={class:"main-content"},y={class:"left-wrap"},h={class:"left-box"},D=n((()=>(0,s._)("h2",{class:"title"},"友情链接",-1))),b={class:"links-list"},f=["href"],L={class:"image-box"},z=["src"],j={class:"name"},C={class:"right-wrap"},O={class:"title"},T={class:"info"},v={class:"detail-wrap"},V=["innerHTML"],U={class:"remark-wrap"},M={class:"remark-box"},H={key:0,class:"remark-input"},W=(0,s.Uk)("发表评论"),x={key:1,class:"no-login"},Y=n((()=>(0,s._)("p",null,"游客，你还有登录，登录之后即可参与精彩评论",-1))),N=(0,s.Uk)("快去登录"),S={class:"remark-list"},$=n((()=>(0,s._)("section",{class:"avatar-box"},[(0,s._)("img",{src:"/static/image/other/202205031426578052518998.png",alt:""})],-1))),G={class:"remark-detail"},B={class:"name-info"},R={class:"name"},q={key:0,class:"middle-text"},E={key:1,class:"name"},I={class:"detail"},K={class:"reply"},F={class:"time"},Q=(0,s.Uk)(" 回复 "),X=(0,s.Uk)("取消回复"),Z={key:0,class:"reply-module"},A={key:0,class:"remark-input"},J={key:1,class:"no-login"},P=n((()=>(0,s._)("p",null,"游客，你还有登录，登录之后即可参与精彩评论",-1))),ee=(0,s.Uk)("快去登录");function te(e,t,a,n,te,ae){const se=(0,s.up)("calendar"),le=(0,s.up)("el-icon"),ne=(0,s.up)("el-tab-pane"),ie=(0,s.up)("el-tabs"),re=(0,s.up)("el-button"),ce=(0,s.up)("el-card"),oe=(0,s.up)("el-input"),me=(0,s.up)("chat-line-square"),ue=(0,s.up)("el-dialog");return(0,s.wg)(),(0,s.iD)("section",i,[(0,s.Wm)(ie,{modelValue:te.activeName,"onUpdate:modelValue":t[0]||(t[0]=e=>te.activeName=e)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(ae.headNewsTypeGroup,(e=>((0,s.wg)(),(0,s.j4)(ne,{key:e.value,label:e.label,name:e.value},{default:(0,s.w5)((()=>[ae.newsObject[te.activeName].length>0?((0,s.wg)(),(0,s.iD)("ul",r,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(ae.newsObject[te.activeName],(e=>((0,s.wg)(),(0,s.iD)("li",{class:"news-item",key:e.uk},[(0,s._)("section",{class:"item-box",onClick:t=>ae.newsItemClick(e)},[(0,s._)("section",o,[e.thumbnail?((0,s.wg)(),(0,s.iD)("img",{key:0,src:e.thumbnail,alt:""},null,8,m)):((0,s.wg)(),(0,s.iD)("p",u,[(0,s.Wm)(le,null,{default:(0,s.w5)((()=>[(0,s.Wm)(se)])),_:1})]))]),(0,s._)("section",p,[(0,s._)("h3",d,(0,l.zw)(e.title),1),(0,s._)("p",w,[(0,s._)("span",null,(0,l.zw)(ae.newsTypeLabel(e.type)),1),(0,s._)("span",null,(0,l.zw)(ae.formatDate(e.edit_time)),1)])])],8,c)])))),128))])):((0,s.wg)(),(0,s.iD)("p",k,(0,l.zw)(e.label)+"分类下暂时没有新闻",1))])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,s.Wm)(ue,{modelValue:te.detailDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>te.detailDialogVisible=e),"destroy-on-close":!0,"custom-class":"show-dialog"},{title:(0,s.w5)((()=>[(0,s.Wm)(re,{type:"primary",onClick:t[1]||(t[1]=e=>te.detailDialogVisible=!1)},{default:(0,s.w5)((()=>[_])),_:1})])),default:(0,s.w5)((()=>[(0,s._)("section",g,[(0,s._)("section",y,[(0,s._)("section",h,[D,(0,s._)("ul",b,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(te.linksList,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"links-item",key:e.id},[(0,s._)("a",{href:e.link,target:"_blank"},[(0,s.Wm)(ce,{shadow:"hover"},{default:(0,s.w5)((()=>[(0,s._)("section",L,[(0,s._)("img",{src:e.image,alt:""},null,8,z)]),(0,s._)("p",j,(0,l.zw)(e.name),1)])),_:2},1024)],8,f)])))),128))])])]),(0,s._)("section",C,[(0,s._)("h3",O,(0,l.zw)(te.newsDetailData.title),1),(0,s._)("p",T,[(0,s._)("span",null,(0,l.zw)(ae.newsTypeLabel(te.newsDetailData.type)),1),(0,s._)("span",null,(0,l.zw)(ae.formatDate(te.newsDetailData.edit_time)),1)]),(0,s._)("section",v,[(0,s._)("article",{class:"detail-content",innerHTML:te.newsDetailData.content},null,8,V)])])]),(0,s._)("section",U,[(0,s._)("section",M,[e.isLogin?((0,s.wg)(),(0,s.iD)("section",H,[(0,s.Wm)(oe,{modelValue:te.remarkObject.remark,"onUpdate:modelValue":t[2]||(t[2]=e=>te.remarkObject.remark=e),rows:5,type:"textarea",resize:"none",placeholder:"发表神妙评论"},null,8,["modelValue"]),(0,s.Wm)(re,{type:"primary",onClick:ae.remarkButton},{default:(0,s.w5)((()=>[W])),_:1},8,["onClick"])])):((0,s.wg)(),(0,s.iD)("section",x,[Y,(0,s.Wm)(re,{type:"primary",onClick:t[3]||(t[3]=t=>e.$router.push("/login"))},{default:(0,s.w5)((()=>[N])),_:1})])),(0,s._)("ul",S,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(te.remarkList,((a,n)=>((0,s.wg)(),(0,s.iD)("li",{class:"item",key:a.id},[$,(0,s._)("section",G,[(0,s._)("p",B,[(0,s._)("span",R,(0,l.zw)(a.user_name),1),a.reply_user_name?((0,s.wg)(),(0,s.iD)("span",q,"回复了")):(0,s.kq)("",!0),a.reply_user_name?((0,s.wg)(),(0,s.iD)("span",E,(0,l.zw)(a.reply_user_name),1)):(0,s.kq)("",!0)]),(0,s._)("p",I,(0,l.zw)(a.content),1),(0,s._)("p",K,[(0,s._)("span",F,(0,l.zw)(ae.formatDate(a.edit_time)),1),a.reply?((0,s.wg)(),(0,s.j4)(re,{key:1,type:"text",class:"reply-button",onClick:e=>a.reply=!1},{default:(0,s.w5)((()=>[X])),_:2},1032,["onClick"])):((0,s.wg)(),(0,s.j4)(re,{key:0,type:"text",class:"reply-button",onClick:e=>ae.replyButton(a,n)},{default:(0,s.w5)((()=>[(0,s.Wm)(le,null,{default:(0,s.w5)((()=>[(0,s.Wm)(me)])),_:1}),Q])),_:2},1032,["onClick"]))]),a.reply?((0,s.wg)(),(0,s.iD)("section",Z,[e.isLogin?((0,s.wg)(),(0,s.iD)("section",A,[(0,s.Wm)(oe,{modelValue:te.remarkObject.reply,"onUpdate:modelValue":t[4]||(t[4]=e=>te.remarkObject.reply=e),rows:5,type:"textarea",resize:"none",placeholder:"回复【"+a.user_name+"】"},null,8,["modelValue","placeholder"]),(0,s.Wm)(re,{type:"primary",onClick:ae.remarkReplyButton},{default:(0,s.w5)((()=>[(0,s.Uk)("回复【"+(0,l.zw)(a.user_name)+"】",1)])),_:2},1032,["onClick"])])):((0,s.wg)(),(0,s.iD)("section",J,[P,(0,s.Wm)(re,{type:"primary",onClick:t[5]||(t[5]=t=>e.$router.push("/login"))},{default:(0,s.w5)((()=>[ee])),_:1})]))])):(0,s.kq)("",!0)])])))),128))])])])])),_:1},8,["modelValue"])])}var ae=a(65),se=a(5574),le=a(5380),ne=a(9713),ie={name:"news-info",components:{},props:{},data(){return{activeName:0,linksList:[],newsTypeGroup:[],newsList:[],remarkList:[],newsDetailData:{},remarkObject:{news_id:0,reply_user_id:0,remark:"",reply:""},detailDialogVisible:!1}},watch:{},computed:{...(0,ae.Se)(["isLogin","userInfo"]),headNewsTypeGroup(){return[].concat([{label:"全部",value:0}],this.newsTypeGroup)},newsObject(){let e={0:this.newsList};return this.newsTypeGroup.forEach((t=>{e[t.value]=[]})),this.newsList.forEach((t=>{e[t.type].push(t)})),e}},beforeCreate(){},created(){this.getLinksList(),this.getNewsTypeList(),this.getNewsList()},beforeMount(){},mounted(){},beforeUpdate(){},updated(){},beforeUnmount(){},unmounted(){},methods:{getLinksList(){const e=this;(0,ne.Xe)().then((t=>{const{code:a,data:s,message:l}=t.data;200===a?e.linksList=s:se.z8.error(l)}))},getNewsTypeList(){const e=this;(0,ne.QO)().then((t=>{const{code:a,data:s,message:l}=t.data;200===a?e.newsTypeGroup=s:se.z8.error(l)}))},getNewsList(){const e=this;(0,ne.zi)().then((t=>{const{code:a,data:s,message:l}=t.data;200===a?e.newsList=s:se.z8.error(l)}))},getRemarkList(){const e=this;(0,ne.eU)({news_id:e.newsDetailData.id}).then((t=>{const{code:a,data:s,message:l}=t.data;200===a?(e.remarkList=s,e.remarkList.forEach((e=>{e.reply=!1})),e.remarkList.sort(((e,t)=>new Date(t.edit_time).getTime()-new Date(e.edit_time).getTime()))):se.z8.error(l)}))},newsTypeLabel(e){let t=this.newsTypeGroup.filter((t=>t.value===e))||[{}];return t[0].label},formatDate(e){let t=(0,le.formatTargetDate)(e);return`${t.YY}-${t.MM}-${t.DD} ${t.HH}:${t.mm}:${t.ss}`},newsItemClick(e){this.newsDetailData=e,this.remarkObject.news_id=e.id,this.getRemarkList(),this.detailDialogVisible=!0},remarkButton(){const e=this;e.remarkObject.remark||se.z8.error("评论内容不能为空"),(0,ne.wU)({news_id:e.remarkObject.news_id,content:e.remarkObject.remark}).then((t=>{const{code:a,message:s}=t.data;200===a?(e.remarkObject.remark="",e.getRemarkList()):se.z8.error(s)}))},replyButton(e,t){const a=this;this.remarkObject.reply_user_id=e.user_id,a.remarkList.forEach(((e,a)=>{e.reply=t===a}))},remarkReplyButton(){const e=this;e.remarkObject.reply||se.z8.error("回复的内容不能为空"),(0,ne.wU)({news_id:e.remarkObject.news_id,reply_user_id:e.remarkObject.reply_user_id,content:e.remarkObject.reply}).then((t=>{const{code:a,message:s}=t.data;200===a?(e.remarkObject.reply="",e.getRemarkList()):se.z8.error(s)}))}}},re=a(89);const ce=(0,re.Z)(ie,[["render",te],["__scopeId","data-v-1b90e82c"]]);var oe=ce}}]);
//# sourceMappingURL=455.413dde5f.js.map