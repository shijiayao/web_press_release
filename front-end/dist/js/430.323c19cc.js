(self["webpackChunkfront_end"]=self["webpackChunkfront_end"]||[]).push([[430],{5380:function(e){e.exports={formatTargetDate(e){let t=new Date(e);return{YY:"".concat("0000",t.getFullYear()).slice(-4),MM:"".concat("0000",t.getMonth()+1).slice(-2),DD:"".concat("0000",t.getDate()).slice(-2),HH:"".concat("0000",t.getHours()).slice(-2),mm:"".concat("0000",t.getMinutes()).slice(-2),ss:"".concat("0000",t.getSeconds()).slice(-2),SSS:"".concat("0000",t.getMilliseconds()).slice(-3)}},formatCurrentDate(){let e=new Date;return{YY:"".concat("0000",e.getFullYear()).slice(-4),MM:"".concat("0000",e.getMonth()+1).slice(-2),DD:"".concat("0000",e.getDate()).slice(-2),HH:"".concat("0000",e.getHours()).slice(-2),mm:"".concat("0000",e.getMinutes()).slice(-2),ss:"".concat("0000",e.getSeconds()).slice(-2),SSS:"".concat("0000",e.getMilliseconds()).slice(-3)}}}},1430:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return z}});var l=a(3396),o=a(7139);const n=e=>((0,l.dD)("data-v-7acdc5f3"),e=e(),(0,l.Cn)(),e),i={class:"remark-manage-wrap"},r={class:"head-box"},c=(0,l.Uk)("搜索"),d=(0,l.Uk)("重置搜索条件"),s={class:"table-box"},m=(0,l.Uk)("编辑"),u=(0,l.Uk)("删除"),p={class:"title"},w={class:"name"},g={key:0,class:"text",style:{"margin-right":"5px"}},b={key:1,class:"name"},h={key:2,class:"text"},D=n((()=>(0,l._)("span",{class:"text"},"的评论",-1))),k={class:"dialog-footer"},f=(0,l.Uk)("取消"),_=(0,l.Uk)("新增"),y=(0,l.Uk)("修改");function C(e,t,a,n,C,W){const V=(0,l.up)("el-input"),U=(0,l.up)("el-button"),x=(0,l.up)("el-table-column"),M=(0,l.up)("el-popconfirm"),R=(0,l.up)("el-table"),z=(0,l.up)("el-form-item"),B=(0,l.up)("el-form"),S=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)("section",i,[(0,l._)("section",r,[(0,l.Wm)(V,{modelValue:C.headForm.nickname,"onUpdate:modelValue":t[0]||(t[0]=e=>C.headForm.nickname=e),placeholder:"用户昵称关键词",clearable:""},null,8,["modelValue"]),(0,l.Wm)(V,{modelValue:C.headForm.keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>C.headForm.keyword=e),placeholder:"评论中内容关键词",clearable:""},null,8,["modelValue"]),(0,l.Wm)(U,{type:"primary",onClick:W.headSearchButton},{default:(0,l.w5)((()=>[c])),_:1},8,["onClick"]),(0,l.Wm)(U,{type:"warning",onClick:W.headResetButton},{default:(0,l.w5)((()=>[d])),_:1},8,["onClick"])]),(0,l._)("section",s,[(0,l.Wm)(R,{size:"default",data:C.tableData,border:"",style:{width:"100%"},"empty-text":"没有数据",onCellClick:W.tableCellClick},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{"header-align":"center",align:"center",label:"#",width:"60"},{default:(0,l.w5)((e=>[(0,l.Uk)((0,o.zw)(e.$index+1),1)])),_:1}),(0,l.Wm)(x,{"header-align":"center",align:"center",prop:"user_name",label:"发表评论用户昵称",width:"180"}),(0,l.Wm)(x,{"header-align":"center",align:"center",prop:"reply_user_name",label:"被回复的用户昵称",width:"180"}),(0,l.Wm)(x,{"header-align":"center",align:"left",prop:"content",label:"内容"}),(0,l.Wm)(x,{"header-align":"center",align:"center",prop:"edit_time",label:"上次修改时间",width:"170"},{default:(0,l.w5)((e=>[(0,l.Uk)((0,o.zw)(W.formatDate(e.row.edit_time)),1)])),_:1}),(0,l.Wm)(x,{"header-align":"center",align:"center",prop:"create_time",label:"评论时间",width:"170"},{default:(0,l.w5)((e=>[(0,l.Uk)((0,o.zw)(W.formatDate(e.row.create_time)),1)])),_:1}),(0,l.Wm)(x,{"header-align":"center",align:"center",label:"操作",width:"200"},{default:(0,l.w5)((e=>[(0,l.Wm)(U,{type:"primary",onClick:t=>W.rowEditButton(e)},{default:(0,l.w5)((()=>[m])),_:2},1032,["onClick"]),(0,l.Wm)(M,{"confirm-button-text":"是","cancel-button-text":"否","icon-color":"red",title:"确定要删除【"+e.row.user_name+"】发布的评论吗?",onConfirm:t=>W.rowDeleteButton(e.row)},{reference:(0,l.w5)((()=>[(0,l.Wm)(U,{type:"warning"},{default:(0,l.w5)((()=>[u])),_:1})])),_:2},1032,["title","onConfirm"])])),_:1})])),_:1},8,["data","onCellClick"])]),(0,l.Wm)(S,{modelValue:C.editDialogVisible,"onUpdate:modelValue":t[4]||(t[4]=e=>C.editDialogVisible=e),"close-on-click-modal":!1,"destroy-on-close":!0,"custom-class":"edit-dialog"},{footer:(0,l.w5)((()=>[(0,l._)("span",k,[(0,l.Wm)(U,{onClick:t[3]||(t[3]=e=>C.editDialogVisible=!1)},{default:(0,l.w5)((()=>[f])),_:1}),"add"===C.dialogMode?((0,l.wg)(),(0,l.j4)(U,{key:0,type:"primary",onClick:e.addDialogButton},{default:(0,l.w5)((()=>[_])),_:1},8,["onClick"])):((0,l.wg)(),(0,l.j4)(U,{key:1,type:"primary",onClick:W.editDialogButton},{default:(0,l.w5)((()=>[y])),_:1},8,["onClick"]))])])),default:(0,l.w5)((()=>[(0,l.Wm)(B,{"label-width":"80px",model:C.tableRowData},{default:(0,l.w5)((()=>[(0,l._)("section",p,[(0,l._)("span",w,(0,o.zw)(C.tableRowData.user_name),1),C.tableRowData.reply_user_name?((0,l.wg)(),(0,l.iD)("span",g,"回复")):(0,l.kq)("",!0),C.tableRowData.reply_user_name?((0,l.wg)(),(0,l.iD)("span",b,(0,o.zw)(C.tableRowData.reply_user_name),1)):(0,l.kq)("",!0),C.tableRowData.reply_user_name?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("span",h,"发布")),D]),(0,l.Wm)(z,{label:"内容:"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{modelValue:C.tableRowData.content,"onUpdate:modelValue":t[2]||(t[2]=e=>C.tableRowData.content=e),rows:10,type:"textarea",placeholder:"请输入公告信息内容"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}var W=a(5574),V=a(5380),U=a(9713),x={name:"remark-manage",components:{},props:{},data(){return{headForm:{nickname:"",keyword:""},tableData:[],tableRowData:{},dialogMode:"",editDialogVisible:!1}},watch:{},computed:{},beforeCreate(){},created(){this.getTableData()},beforeMount(){},mounted(){},beforeUpdate(){},updated(){},beforeUnmount(){},unmounted(){},methods:{getTableData(){const e=this;(0,U.eU)(e.headForm).then((t=>{const{code:a,data:l,message:o}=t.data;200===a?e.tableData=l:W.z8.error(o)}))},userLevel(e){let t="所有用户";return e.level<1e3&&(t="管理员"),t},formatDate(e){let t=(0,V.formatTargetDate)(e);return`${t.YY}-${t.MM}-${t.DD} ${t.HH}:${t.mm}:${t.ss}`},headSearchButton(){this.getTableData()},headResetButton(){this.headForm={nickname:"",keyword:""}},tableCellClick(e,t){"title"!==t.property&&"content"!==t.property||(this.tableRowDetailData={title:e.title,content:e.content},this.detailDialogVisible=!0)},rowEditButton(e){this.tableRowData={index:e.$index,...e.row},this.dialogMode="edit",this.editDialogVisible=!0},rowDeleteButton(e){const t=this;(0,U.$1)({op_type:0,id:e.id}).then((e=>{const{code:a,message:l}=e.data;200===a?(W.z8.success(l),t.getTableData()):W.z8.error(l)}))},editDialogButton(){const e=this,{index:t,id:a,content:l}=e.tableRowData;let o={op_type:1,id:a};l?(l!==e.tableData[t].content&&(o.content=l),Object.keys(o).length>2?(0,U.$1)(o).then((t=>{const{code:a,message:l}=t.data;200===a?(W.z8.success(l),e.getTableData(),e.editDialogVisible=!1):W.z8.error(l)})):W.z8.warning("什么都没有更改！")):W.z8.error("评论内容不能为空")}}},M=a(89);const R=(0,M.Z)(x,[["render",C],["__scopeId","data-v-7acdc5f3"]]);var z=R}}]);
//# sourceMappingURL=430.323c19cc.js.map