(self["webpackChunkfront_end"]=self["webpackChunkfront_end"]||[]).push([[450],{5380:function(e){e.exports={formatTargetDate(e){let t=new Date(e);return{YY:"".concat("0000",t.getFullYear()).slice(-4),MM:"".concat("0000",t.getMonth()+1).slice(-2),DD:"".concat("0000",t.getDate()).slice(-2),HH:"".concat("0000",t.getHours()).slice(-2),mm:"".concat("0000",t.getMinutes()).slice(-2),ss:"".concat("0000",t.getSeconds()).slice(-2),SSS:"".concat("0000",t.getMilliseconds()).slice(-3)}},formatCurrentDate(){let e=new Date;return{YY:"".concat("0000",e.getFullYear()).slice(-4),MM:"".concat("0000",e.getMonth()+1).slice(-2),DD:"".concat("0000",e.getDate()).slice(-2),HH:"".concat("0000",e.getHours()).slice(-2),mm:"".concat("0000",e.getMinutes()).slice(-2),ss:"".concat("0000",e.getSeconds()).slice(-2),SSS:"".concat("0000",e.getMilliseconds()).slice(-3)}}}},9450:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ce}});var a=s(3396),l=s(7139);const n=e=>((0,a.dD)("data-v-08838fcb"),e=e(),(0,a.Cn)(),e),i={class:"news-info-wrap"},r={class:"news-list"},c=["onClick"],o={class:"left-box"},m=["src"],u={key:1,class:"no-thumbnail"},p={class:"right-box"},d={class:"title"},k={class:"info"},w=(0,a.Uk)("返回"),_={class:"main-content"},g={class:"left-wrap"},y={class:"left-box"},D=n((()=>(0,a._)("h2",{class:"title"},"友情链接",-1))),h={class:"links-list"},b=["href"],f={class:"image-box"},L=["src"],z={class:"name"},C={class:"right-wrap"},j={class:"title"},O={class:"info"},M={class:"detail-wrap"},U=["innerHTML"],T={class:"remark-wrap"},V={class:"remark-box"},x={key:0,class:"remark-input"},H=(0,a.Uk)("发表评论"),W={key:1,class:"no-login"},Y=n((()=>(0,a._)("p",null,"游客，你还有登录，登录之后即可参与精彩评论",-1))),S=(0,a.Uk)("快去登录"),v={class:"remark-list"},$=n((()=>(0,a._)("section",{class:"avatar-box"},[(0,a._)("img",{src:"/static/image/other/202205031426578052518998.png",alt:""})],-1))),B={class:"remark-detail"},R={class:"name-info"},q={class:"name"},I={key:0,class:"middle-text"},N={key:1,class:"name"},G={class:"detail"},K={class:"reply"},E={class:"time"},F=(0,a.Uk)("回复 "),Q=(0,a.Uk)("取消回复"),X={key:0,class:"reply-module"},Z={key:0,class:"remark-input"},A={key:1,class:"no-login"},J=n((()=>(0,a._)("p",null,"游客，你还有登录，登录之后即可参与精彩评论",-1))),P=(0,a.Uk)("快去登录");function ee(e,t,s,n,ee,te){const se=(0,a.up)("calendar"),ae=(0,a.up)("el-icon"),le=(0,a.up)("el-button"),ne=(0,a.up)("el-card"),ie=(0,a.up)("el-input"),re=(0,a.up)("chat-line-square"),ce=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("section",i,[(0,a._)("ul",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(ee.newsList,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"news-item",key:e.uk},[(0,a._)("section",{class:"item-box",onClick:t=>te.newsItemClick(e)},[(0,a._)("section",o,[e.thumbnail?((0,a.wg)(),(0,a.iD)("img",{key:0,src:e.thumbnail,alt:""},null,8,m)):((0,a.wg)(),(0,a.iD)("p",u,[(0,a.Wm)(ae,null,{default:(0,a.w5)((()=>[(0,a.Wm)(se)])),_:1})]))]),(0,a._)("section",p,[(0,a._)("h3",d,(0,l.zw)(e.title),1),(0,a._)("p",k,[(0,a._)("span",null,(0,l.zw)(te.newsTypeLabel(e.type)),1),(0,a._)("span",null,(0,l.zw)(te.formatDate(e.edit_time)),1)])])],8,c)])))),128))]),(0,a.Wm)(ce,{modelValue:ee.detailDialogVisible,"onUpdate:modelValue":t[5]||(t[5]=e=>ee.detailDialogVisible=e),"destroy-on-close":!0,"custom-class":"show-dialog"},{title:(0,a.w5)((()=>[(0,a.Wm)(le,{type:"primary",onClick:t[0]||(t[0]=e=>ee.detailDialogVisible=!1)},{default:(0,a.w5)((()=>[w])),_:1})])),default:(0,a.w5)((()=>[(0,a._)("section",_,[(0,a._)("section",g,[(0,a._)("section",y,[D,(0,a._)("ul",h,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(ee.linksList,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"links-item",key:e.id},[(0,a._)("a",{href:e.link,target:"_blank"},[(0,a.Wm)(ne,{shadow:"hover"},{default:(0,a.w5)((()=>[(0,a._)("section",f,[(0,a._)("img",{src:e.image,alt:""},null,8,L)]),(0,a._)("p",z,(0,l.zw)(e.name),1)])),_:2},1024)],8,b)])))),128))])])]),(0,a._)("section",C,[(0,a._)("h3",j,(0,l.zw)(ee.newsDetailData.title),1),(0,a._)("p",O,[(0,a._)("span",null,(0,l.zw)(te.newsTypeLabel(ee.newsDetailData.type)),1),(0,a._)("span",null,(0,l.zw)(te.formatDate(ee.newsDetailData.edit_time)),1)]),(0,a._)("section",M,[(0,a._)("article",{class:"detail-content",innerHTML:ee.newsDetailData.content},null,8,U)])])]),(0,a._)("section",T,[(0,a._)("section",V,[e.isLogin?((0,a.wg)(),(0,a.iD)("section",x,[(0,a.Wm)(ie,{modelValue:ee.remarkObject.remark,"onUpdate:modelValue":t[1]||(t[1]=e=>ee.remarkObject.remark=e),rows:5,type:"textarea",resize:"none",placeholder:"发表神妙评论"},null,8,["modelValue"]),(0,a.Wm)(le,{type:"primary",onClick:te.remarkButton},{default:(0,a.w5)((()=>[H])),_:1},8,["onClick"])])):((0,a.wg)(),(0,a.iD)("section",W,[Y,(0,a.Wm)(le,{type:"primary",onClick:t[2]||(t[2]=t=>e.$router.push("/login"))},{default:(0,a.w5)((()=>[S])),_:1})])),(0,a._)("ul",v,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(ee.remarkList,((s,n)=>((0,a.wg)(),(0,a.iD)("li",{class:"item",key:s.id},[$,(0,a._)("section",B,[(0,a._)("p",R,[(0,a._)("span",q,(0,l.zw)(s.user_name),1),s.reply_user_name?((0,a.wg)(),(0,a.iD)("span",I,"回复了")):(0,a.kq)("",!0),s.reply_user_name?((0,a.wg)(),(0,a.iD)("span",N,(0,l.zw)(s.reply_user_name),1)):(0,a.kq)("",!0)]),(0,a._)("p",G,(0,l.zw)(s.content),1),(0,a._)("p",K,[(0,a._)("span",E,(0,l.zw)(te.formatDate(s.edit_time)),1),s.reply?((0,a.wg)(),(0,a.j4)(le,{key:1,type:"text",class:"reply-button",onClick:e=>s.reply=!1},{default:(0,a.w5)((()=>[Q])),_:2},1032,["onClick"])):((0,a.wg)(),(0,a.j4)(le,{key:0,type:"text",class:"reply-button",onClick:e=>te.replyButton(s,n)},{default:(0,a.w5)((()=>[(0,a.Wm)(ae,null,{default:(0,a.w5)((()=>[(0,a.Wm)(re)])),_:1}),F])),_:2},1032,["onClick"]))]),s.reply?((0,a.wg)(),(0,a.iD)("section",X,[e.isLogin?((0,a.wg)(),(0,a.iD)("section",Z,[(0,a.Wm)(ie,{modelValue:ee.remarkObject.reply,"onUpdate:modelValue":t[3]||(t[3]=e=>ee.remarkObject.reply=e),rows:5,type:"textarea",resize:"none",placeholder:"回复【"+s.user_name+"】"},null,8,["modelValue","placeholder"]),(0,a.Wm)(le,{type:"primary",onClick:te.remarkReplyButton},{default:(0,a.w5)((()=>[(0,a.Uk)("回复【"+(0,l.zw)(s.user_name)+"】",1)])),_:2},1032,["onClick"])])):((0,a.wg)(),(0,a.iD)("section",A,[J,(0,a.Wm)(le,{type:"primary",onClick:t[4]||(t[4]=t=>e.$router.push("/login"))},{default:(0,a.w5)((()=>[P])),_:1})]))])):(0,a.kq)("",!0)])])))),128))])])])])),_:1},8,["modelValue"])])}var te=s(65),se=s(5574),ae=s(5380),le=s(9713),ne={name:"news-info",components:{},props:{},data(){return{linksList:[],newsTypeGroup:[],newsList:[],remarkList:[],newsDetailData:{},remarkObject:{news_id:0,reply_user_id:0,remark:"",reply:""},detailDialogVisible:!1}},watch:{},computed:{...(0,te.Se)(["isLogin","userInfo"])},beforeCreate(){},created(){this.getLinksList(),this.getNewsTypeList(),this.getNewsList()},beforeMount(){},mounted(){},beforeUpdate(){},updated(){},beforeUnmount(){},unmounted(){},methods:{getLinksList(){const e=this;(0,le.Xe)().then((t=>{const{code:s,data:a,message:l}=t.data;200===s?e.linksList=a:se.z8.error(l)}))},getNewsTypeList(){const e=this;(0,le.QO)().then((t=>{const{code:s,data:a,message:l}=t.data;200===s?e.newsTypeGroup=a:se.z8.error(l)}))},getNewsList(){const e=this;(0,le.zi)().then((t=>{const{code:s,data:a,message:l}=t.data;200===s?e.newsList=a:se.z8.error(l)}))},getRemarkList(){const e=this;(0,le.eU)({news_id:e.newsDetailData.id}).then((t=>{const{code:s,data:a,message:l}=t.data;200===s?(e.remarkList=a,e.remarkList.forEach((e=>{e.reply=!1})),e.remarkList.sort(((e,t)=>new Date(t.edit_time).getTime()-new Date(e.edit_time).getTime()))):se.z8.error(l)}))},newsTypeLabel(e){let t=this.newsTypeGroup.filter((t=>t.value===e))||[{}];return t[0].label},formatDate(e){let t=(0,ae.formatTargetDate)(e);return`${t.YY}-${t.MM}-${t.DD} ${t.HH}:${t.mm}:${t.ss}`},newsItemClick(e){this.newsDetailData=e,this.remarkObject.news_id=e.id,this.getRemarkList(),this.detailDialogVisible=!0},remarkButton(){const e=this;e.remarkObject.remark||se.z8.error("评论内容不能为空"),(0,le.wU)({news_id:e.remarkObject.news_id,content:e.remarkObject.remark}).then((t=>{const{code:s,message:a}=t.data;200===s?(e.remarkObject.remark="",e.getRemarkList()):se.z8.error(a)}))},replyButton(e,t){const s=this;this.remarkObject.reply_user_id=e.user_id,s.remarkList.forEach(((e,s)=>{e.reply=t===s}))},remarkReplyButton(){const e=this;e.remarkObject.reply||se.z8.error("回复的内容不能为空"),(0,le.wU)({news_id:e.remarkObject.news_id,reply_user_id:e.remarkObject.reply_user_id,content:e.remarkObject.reply}).then((t=>{const{code:s,message:a}=t.data;200===s?(e.remarkObject.reply="",e.getRemarkList()):se.z8.error(a)}))}}},ie=s(89);const re=(0,ie.Z)(ne,[["render",ee],["__scopeId","data-v-08838fcb"]]);var ce=re}}]);
//# sourceMappingURL=450.9b09f24c.js.map